import{e as V,i as d,l as h,q as D,c,a as e,b as p,k as o,F as w,r as $,w as j,j as F,f as L,o as n,v as M,n as q,t as f,s as g,g as k,E as J,h as G,J as H}from"./CvCsRBP3.js";import{_ as K}from"./B0NQAFUX.js";import{_ as Q}from"./BnCwyxqX.js";const W={class:"viewport"},X={class:"scene-container"},Y=["aria-label","onClick"],Z={class:"hotspot-label"},ee={class:"flex flex-col md:flex-row h-125 overflow-hidden bg-gray-900 text-white"},te={class:"w-full md:w-5/12 bg-linear-to-br from-indigo-900 to-purple-900 flex flex-col items-center justify-center p-8 relative"},se={class:"relative w-48 h-48 md:w-56 md:h-56 shadow-2xl rounded-full border-4 border-white/10 flex items-center justify-center"},le={class:"w-full md:w-7/12 bg-gray-950 flex flex-col"},oe={class:"flex-1 overflow-y-auto p-2 space-y-1"},ae=["onClick"],ne={class:"flex items-center gap-4"},ie={class:"w-6 text-center text-sm font-medium text-white/50"},re={key:1},ce={class:"text-xs text-white/40 font-mono"},ue={class:"p-6 bg-gray-900 border-t border-white/10"},de={class:"mb-4 text-center"},pe={class:"text-sm font-bold text-white"},ve={class:"flex items-center justify-center gap-6"},fe=["src"],xe=V({__name:"recordplayer",setup(me){const m=d(!1),v=d(!1),l=d(!1),_=d([]),a=d(0),r=d(null),y=h(()=>_.value[a.value]),N=h(()=>y.value?`/audio/${y.value.file}`:""),C=h(()=>a.value<_.value.length-1),T=h(()=>a.value>0),z=()=>{r.value&&(r.value.paused?(r.value.play().catch(i=>console.error(i)),l.value=!0):(r.value.pause(),l.value=!1))},B=i=>{a.value=i,l.value=!0},P=()=>{C.value?(a.value++,l.value=!0):l.value=!1},A=()=>{T.value&&(a.value--,l.value=!0)},I=i=>{_.value=i,a.value=0,m.value=!0,setTimeout(()=>{v.value=!0,H(()=>{l.value=!0})},500)};D(v,i=>{i||(r.value&&(r.value.pause(),l.value=!1),setTimeout(()=>{m.value=!1},500))});const O=[{id:1,x:46,y:60,label:"Open record player",visible:()=>!m.value,action:()=>I([{title:"Title Music",file:"track01.mp3",duration:"4:05"},{title:"The Discovery",file:"track02.mp3",duration:"1:36"},{title:"Running Away",file:"track03.mp3",duration:"2:12"}])}],R=[{name:"Bedroom",path:"/bedroom"}];return(i,t)=>{const S=L,U=K,b=J,x=G,E=Q;return n(),c("div",W,[e("div",X,[p(S,{src:o(m)?"/images/recordplayer-open.jpg":"/images/recordplayer-closed.jpg",alt:"Record player closeup",class:"scene-image",preload:""},null,8,["src"]),(n(),c(w,null,$(O,s=>(n(),c(w,{key:s.id},[!s.visible||s.visible()?(n(),c("button",{key:0,class:"hotspot",style:q({left:`${s.x}%`,top:`${s.y}%`}),"aria-label":s.label,onClick:s.action},[t[3]||(t[3]=e("span",{class:"hotspot-ring"},null,-1)),t[4]||(t[4]=e("span",{class:"hotspot-dot"},null,-1)),e("span",Z,f(s.label),1)],12,Y)):M("",!0)],64))),64))]),p(U,{rooms:R}),p(E,{open:o(v),"onUpdate:open":t[2]||(t[2]=s=>F(v)?v.value=s:null),ui:{content:"sm:max-w-4xl"},title:"Now Playing"},{content:j(()=>[e("div",ee,[e("div",te,[e("div",se,[e("div",{class:g(["w-full h-full rounded-full overflow-hidden bg-black",{"animate-spin-slow":o(l)}])},[...t[5]||(t[5]=[e("div",{class:"w-full h-full bg-[url('https://placehold.co/400')] bg-cover opacity-80"},null,-1)])],2),t[6]||(t[6]=e("div",{class:"absolute w-16 h-16 bg-red-600 rounded-full border-4 border-black z-10"},null,-1))]),t[7]||(t[7]=e("div",{class:"mt-8 text-center"},[e("h2",{class:"text-2xl font-bold tracking-tight"},"Tethered"),e("p",{class:"text-white/60 text-sm mt-1 uppercase tracking-widest"}," Original Soundtrack ")],-1))]),e("div",le,[t[8]||(t[8]=e("div",{class:"p-6 border-b border-white/10"},[e("h3",{class:"text-lg font-medium text-white/90"},"Tracklist")],-1)),e("div",oe,[(n(!0),c(w,null,$(o(_),(s,u)=>(n(),c("button",{key:u,class:g(["w-full flex items-center justify-between p-3 rounded-md transition-colors group text-left",o(a)===u?"bg-white/10":"hover:bg-white/5"]),onClick:_e=>B(u)},[e("div",ne,[e("div",ie,[o(a)===u&&o(l)?(n(),k(b,{key:0,name:"i-heroicons-musical-note-20-solid",class:"text-primary-400 animate-pulse"})):(n(),c("span",re,f(u+1),1))]),e("div",{class:g(o(a)===u?"text-primary-400 font-bold":"text-white/90")},f(s.title),3)]),e("div",ce,f(s.duration),1)],10,ae))),128))]),e("div",ue,[e("div",de,[e("div",pe,f(o(y)?.title),1)]),e("div",ve,[e("audio",{ref_key:"audioPlayer",ref:r,src:o(N),autoplay:"",onEnded:P,onPlay:t[0]||(t[0]=s=>l.value=!0),onPause:t[1]||(t[1]=s=>l.value=!1)},null,40,fe),p(x,{icon:"i-heroicons-backward-20-solid",variant:"ghost",color:"neutral",disabled:!o(T),onClick:A},null,8,["disabled"]),p(x,{size:"xl",color:"primary",variant:"solid",class:"rounded-full w-14 h-14 flex items-center justify-center shadow-lg shadow-primary-500/20",onClick:z},{default:j(()=>[o(l)?(n(),k(b,{key:0,name:"i-heroicons-pause-20-solid",class:"size-5"})):(n(),k(b,{key:1,name:"i-heroicons-play-20-solid",class:"size-5"}))]),_:1}),p(x,{icon:"i-heroicons-forward-20-solid",variant:"ghost",color:"neutral",disabled:!o(C),onClick:P},null,8,["disabled"])])])])])]),_:1},8,["open"])])}}});export{xe as default};
