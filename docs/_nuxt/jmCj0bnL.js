import{e as V,r as p,s as h,f as D,c,a as e,b as d,g as o,F as g,i as $,w as N,p as F,h as L,o as n,j as M,k as q,t as v,n as w,l as k,S as G,m as H,E as J}from"./C-678-Xe.js";import{_ as K}from"./Duu18p14.js";import{_ as Q}from"./Dq5I1sfR.js";const W={class:"viewport"},X={class:"scene-container"},Y={style:{display:"none"},"aria-hidden":"true"},Z=["aria-label","onClick"],ee={class:"hotspot-label"},te={class:"flex flex-col md:flex-row h-125 overflow-hidden bg-gray-900 text-white"},se={class:"w-full md:w-5/12 bg-linear-to-br from-indigo-900 to-purple-900 flex flex-col items-center justify-center p-8 relative"},le={class:"relative w-48 h-48 md:w-56 md:h-56 shadow-2xl rounded-full border-4 border-white/10 flex items-center justify-center"},oe={class:"w-full md:w-7/12 bg-gray-950 flex flex-col"},ae={class:"flex-1 overflow-y-auto p-2 space-y-1"},ne=["onClick"],ie={class:"flex items-center gap-4"},re={class:"w-6 text-center text-sm font-medium text-white/50"},ce={key:1},de={class:"text-xs text-white/40 font-mono"},ue={class:"p-6 bg-gray-900 border-t border-white/10"},pe={class:"mb-4 text-center"},me={class:"text-sm font-bold text-white"},ve={class:"flex items-center justify-center gap-6"},fe=["src"],ge=V({__name:"recordplayer",setup(_e){const f=p(!1),m=p(!1),l=p(!1),_=p([]),a=p(0),r=p(null),y=h(()=>_.value[a.value]),z=h(()=>y.value?`/audio/${y.value.file}`:""),C=h(()=>a.value<_.value.length-1),T=h(()=>a.value>0),B=()=>{r.value&&(r.value.paused?(r.value.play().catch(i=>console.error(i)),l.value=!0):(r.value.pause(),l.value=!1))},A=i=>{a.value=i,l.value=!0},P=()=>{C.value?(a.value++,l.value=!0):l.value=!1},S=()=>{T.value&&(a.value--,l.value=!0)},I=i=>{_.value=i,a.value=0,f.value=!0,setTimeout(()=>{m.value=!0,J(()=>{l.value=!0})},500)};D(m,i=>{i||(r.value&&(r.value.pause(),l.value=!1),setTimeout(()=>{f.value=!1},500))});const O=[{id:1,x:46,y:60,label:"Open record player",visible:()=>!f.value,action:()=>I([{title:"Title Music",file:"track01.mp3",duration:"4:05"},{title:"The Discovery",file:"track02.mp3",duration:"1:36"},{title:"Running Away",file:"track03.mp3",duration:"2:12"}])}],R=[{name:"Bedroom",path:"/bedroom"}];return(i,t)=>{const j=L,U=K,b=G,x=H,E=Q;return n(),c("div",W,[e("div",X,[d(j,{src:o(f)?"/images/recordplayer-open.jpg":"/images/recordplayer-closed.jpg",alt:"Record player closeup",class:"scene-image",preload:""},null,8,["src"]),e("div",Y,[d(j,{src:"/images/recordplayer-open.jpg"})]),(n(),c(g,null,$(O,s=>(n(),c(g,{key:s.id},[!s.visible||s.visible()?(n(),c("button",{key:0,class:"hotspot",style:q({left:`${s.x}%`,top:`${s.y}%`}),"aria-label":s.label,onClick:s.action},[t[3]||(t[3]=e("span",{class:"hotspot-ring"},null,-1)),t[4]||(t[4]=e("span",{class:"hotspot-dot"},null,-1)),e("span",ee,v(s.label),1)],12,Z)):M("",!0)],64))),64))]),d(U,{rooms:R}),d(E,{open:o(m),"onUpdate:open":t[2]||(t[2]=s=>F(m)?m.value=s:null),ui:{content:"sm:max-w-4xl"},title:"Now Playing"},{content:N(()=>[e("div",te,[e("div",se,[e("div",le,[e("div",{class:w(["w-full h-full rounded-full overflow-hidden bg-black",{"animate-spin-slow":o(l)}])},[...t[5]||(t[5]=[e("div",{class:"w-full h-full bg-[url('https://placehold.co/400')] bg-cover opacity-80"},null,-1)])],2),t[6]||(t[6]=e("div",{class:"absolute w-16 h-16 bg-red-600 rounded-full border-4 border-black z-10"},null,-1))]),t[7]||(t[7]=e("div",{class:"mt-8 text-center"},[e("h2",{class:"text-2xl font-bold tracking-tight"},"Tethered"),e("p",{class:"text-white/60 text-sm mt-1 uppercase tracking-widest"}," Original Soundtrack ")],-1))]),e("div",oe,[t[8]||(t[8]=e("div",{class:"p-6 border-b border-white/10"},[e("h3",{class:"text-lg font-medium text-white/90"},"Tracklist")],-1)),e("div",ae,[(n(!0),c(g,null,$(o(_),(s,u)=>(n(),c("button",{key:u,class:w(["w-full flex items-center justify-between p-3 rounded-md transition-colors group text-left",o(a)===u?"bg-white/10":"hover:bg-white/5"]),onClick:he=>A(u)},[e("div",ie,[e("div",re,[o(a)===u&&o(l)?(n(),k(b,{key:0,name:"i-heroicons-musical-note-20-solid",class:"text-primary-400 animate-pulse"})):(n(),c("span",ce,v(u+1),1))]),e("div",{class:w(o(a)===u?"text-primary-400 font-bold":"text-white/90")},v(s.title),3)]),e("div",de,v(s.duration),1)],10,ne))),128))]),e("div",ue,[e("div",pe,[e("div",me,v(o(y)?.title),1)]),e("div",ve,[e("audio",{ref_key:"audioPlayer",ref:r,src:o(z),autoplay:"",onEnded:P,onPlay:t[0]||(t[0]=s=>l.value=!0),onPause:t[1]||(t[1]=s=>l.value=!1)},null,40,fe),d(x,{icon:"i-heroicons-backward-20-solid",variant:"ghost",color:"neutral",disabled:!o(T),onClick:S},null,8,["disabled"]),d(x,{size:"xl",color:"primary",variant:"solid",class:"rounded-full w-14 h-14 flex items-center justify-center shadow-lg shadow-primary-500/20",onClick:B},{default:N(()=>[o(l)?(n(),k(b,{key:0,name:"i-heroicons-pause-20-solid",class:"size-5"})):(n(),k(b,{key:1,name:"i-heroicons-play-20-solid",class:"size-5"}))]),_:1}),d(x,{icon:"i-heroicons-forward-20-solid",variant:"ghost",color:"neutral",disabled:!o(C),onClick:P},null,8,["disabled"])])])])])]),_:1},8,["open"])])}}});export{ge as default};
